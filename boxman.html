<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{
            paddding:0;
            margin:0;
        }
        #stage{
            width:500px;
            height:500px;
            position:absolute;
            left:50%;
            top:50%;
            margin-top:-200px;
            margin-left:-255px;
        }
        .wall{
            position:absolute;
            width:50px;
            height:50px;
            background:url("img/Wall_Brown.png") no-repeat center;
            z-index:1;
        }
        .box{
            position:absolute;
            width:50px;
            height:50px;
            background:url("img/Crate_Black.png") no-repeat center;
            z-index:2;
        }
        .man{
            position:absolute;
            width:50px;
            height:50px;
            background:url("img/Character3.png") no-repeat center;
            background-size: 60%;
            z-index:2;
        }
        .end{
            position:absolute;
            width:50px;
            height:50px;
            background:url("img/EndPoint_Red.png") no-repeat center;
            z-index:1;
        }
        .ground{
            position:absolute;
            width:50px;
            background:url("img/GroundGravel_Grass.png") repeat center;
            z-index:0;
        }
        form{
            position:absolute;
            display:block;
            width:200px;
            height:30px;
            top:10%;
            left:50%;
            margin-top:-15px;
            margin-left:-100px;
            z-index:2;
        }
        #select{
            /*display:block;*/
            /*margin:20px auto;*/
            width:100px;
            height:30px;
        }
    </style>
    <script src="boxman.js"></script>
</head>
<body>
<form>
    <label>游戏关卡：</label>
    <select id="select">
        <option>第一关</option>
        <option>第二关</option>
        <option>第三关</option>
        <option>第四关</option>
        <option>第五关</option>
        <option>第六关</option>
        <option>第七关</option>
        <option>第八关</option>
        <option>第九关</option>
    </select>
</form>
<div id="stage"></div>
<script>
    window.onload=function(){
        var ground=[[
            [50,250],[50,250],[0,250],[0,250],[0,250],[50,250],[50,250],[50,250]
        ],[
            [0,350],[0,350],[0,350],[0,350],[0,350],[0,350],[0,350],[0,350]
        ],[
            [100,250],[0,300],[0,300],[0,300],[0,300],[0,300],[0,300],[0,300],[50,300],[50,200]
        ],[
            [150,350],[0,350],[0,350],[0,350],[0,350],[0,350],[50,350],[150,350]
        ],[
            [250,350],[250,350],[50,350],[0,350],[0,350],[0,350],[0,350],[0,350],[0,350],[0,250]
        ],[
            [100,250],[50,250],[50,250],[0,250],[0,250],[0,300],[0,300],[0,300],[0,300],[100,200]
        ],[
            [250,400],[0,400],[0,400],[0,400],[0,400],[0,400],[0,400],[0,400],[0,400],[0,400],[250,400]
        ],[
            [100,250],[100,250],[0,250],[0,300],[0,300],[0,300],[0,300],[0,200]
        ],[
            [50,200],[0,250],[0,250],[0,250],[0,250],[100,250],[100,250],[0,250],[0,250],[0,250],[0,250],[0,200]
        ]];
        var wall = [[
            [0, 50], [0, 100], [0, 150], [0, 200], [0, 250],
            [50, 50], [50, 250],
            [100, 0], [100, 50], [50, 150], [100, 250],
            [150, 0], [150, 250], [200, 0], [200, 250],
            [250, 0], [250, 50], [250, 150], [250, 200], [250, 250],
            [300, 50], [300, 250],
            [350, 50], [350, 250],
            [400, 50], [400, 100], [400, 150], [400, 200], [400, 250]
        ], [
            [0, 0], [0, 50], [0, 100], [0, 150], [0, 200], [0, 250], [0, 300], [0, 350],
            [50, 0], [50, 200], [50, 350],
            [100, 0], [100, 200], [100, 350],
            [150, 0], [150, 350],
            [200, 0], [200, 350],
            [250, 0], [250, 150], [250, 350],
            [300, 0], [300, 150], [300, 350],
            [350, 0], [350, 50], [350, 100], [350, 150], [350, 200], [350, 250], [350, 300], [350, 350]
        ],[
                [50,0],[100,0],[150,0],[200,0],[250,0],[300,0],[350,0],
                [50,50],[350,50],[400,50],[450,50],
                [0,100],[50,100],[150,100],[200,100],[250,100],[450,100],
                [0,150],[450,150],
                [0,200],[200,200],[400,200],[450,200],
                [0,250],[50,250],[200,250],[400,250],
                [50,300],[100,300],[150,300],[200,300],[250,300],[300,300],[350,300],[400,300]
        ],[
                [0,150],[0,200],[0,250],[0,300],[0,350],
                [50,0],[50,50],[50,100],[50,150],[50,350],
                [100,0],[100,150],[100,200],[100,350],
                [150,0],[150,350],
                [200,0],[200,50],[200,150],[200,200],[200,350],
                [250,0],[250,50],[250,250],[250,350],
                [300,50],[300,100],[300,150],[300,350],
                [350,150],[350,200],[350,250],[350,300],[350,350]
        ],[
                [0,250],[0,300],[0,350],
                [50,250],[50,350],
                [100,50],[100,100],[100,150],[100,200],[100,250],[100,350],
                [150,0],[150,50],[150,350],
                [200,0],[200,350],
                [250,0],[250,200],[250,350],
                [300,0],[300,50],[300,100],[300,200],[300,250],[300,350],
                [350,0],[350,350],
                [400,0],[400,250],[400,300],[400,350],
                [450,0],[450,50],[450,100],[450,150],[450,200],[450,250]
        ],[
                [0,100],[0,150],[0,200],[0,250],
                [50,50],[50,100],[50,250],
                [100,50],[100,250],
                [150,0],[150,50],[150,250],
                [200,0],[200,250],
                [250,0],[250,100],[250,250],[250,300],
                [300,0],[300,100],[300,300],
                [350,0],[350,300],
                [400,0],[400,50],[400,100],[400,200],[400,250],[400,300],
                [450,100],[450,150],[450,200]
        ],[
                [0,250],[0,300],[0,350],[0,400],
                [50,0],[50,50],[50,100],[50,150],[50,200],[50,250],[50,400],
                [100,0],[100,400],
                [150,0],[150,200],[150,250],[150,400],
                [200,0],[200,50],[200,150],[200,400],
                [250,0],[250,50],[250,150],[250,400],
                [300,0],[300,150],[300,400],
                [350,0],[350,200],[350,250],[350,400],
                [400,0],[400,400],
                [450,0],[450,50],[450,100],[450,150],[450,200],[450,250],[450,400],
                [500,250],[500,300],[500,350],[500,400]
        ],[
                [0,100],[0,150],[0,200],[0,250],
                [50,100],[50,250],
                [100,0],[100,50],[100,100],[100,250],
                [150,0],[150,250],[150,300],
                [200,0],[200,300],
                [250,0],[250,300],
                [300,0],[300,200],[300,250],[300,300],
                [350,0],[350,50],[350,100],[350,150],[350,200]
        ],[
             [0,50],[0,100],[0,150],[0,200],
                [50,0],[50,50],[50,200],[50,250],
                [100,0],[100,250],
                [150,0],[150,250],
                [200,0],[200,50],[200,100],[200,250],
                [250,100],[250,250],
                [300,100],[300,200],[300,250],
                [350,0],[350,50],[350,100],[350,250],
                [400,0],[400,250],
                [450,0],[450,250],
                [500,0],[500,200],[500,250],
                [550,0],[550,50],[550,100],[550,150],[550,200]
        ]];
        var man = [[300, 200], [100, 250],[100,150],[100,100],[400,50],
            [400,150],[400,350],[50,150],[400,200]];
        var box = [[
            [300, 100], [300, 150]
        ], [
            [100, 100], [150, 100], [200, 100],
            [150, 250], [200, 250], [250, 250]
        ],[
            [100,100],[200,150],[300,200],[350,150]
        ],[
              [100,250],[150,100],[250,300]
        ],[
                [150,150],[200,200],[200,250],[250,150],[350,150]
        ],[
                [150,150],[200,100],[200,200],[250,150],[300,200]
        ],[
                [100,150],[100,300],[250,100],[250,300],[400,150],[400,300]
        ],[
                [100,200],[150,100],[150,150],[200,100],[250,100]
        ],[
                [100,100],[150,150],[400,100],[450,150],
        ]];
        var end = [[
            [100, 200], [200, 200]
        ], [
            [100, 150], [150, 150], [200, 150],
            [150, 200], [200, 200], [250, 200]
        ],[
            [100,200],[150,200],[100,250],[150,250]
        ],[
            [50,200],[50,250],[50,300]
        ],[
                [50,300],[100,300],[150,300],[200,300],[250,300]
        ],[
                [50,150],[50,200],[100,100],[100,150],[100,200]
        ],[
                [200,200],[200,250],[250,200],[250,250],[300,200],[300,250]
        ],[
                [150,200],[200,150],[200,200],[250,150],[250,200]
        ],[
                [200,150],[250,150],[300,150],[350,150]
        ]];
        var stage=document.getElementById("stage");
        var boxman=new boxMan(stage,{
            wallArr:wall,
            manArr:man,
            boxArr:box,
            endArr:end,
            groundArr:ground
        });
        var select=document.getElementById("select");
        select.onchange=function(){
            boxman.level=this.selectedIndex;
            boxman.stage.innerHTML='';
            boxman.init();
        }
        boxman.init();
        document.onkeydown=function(){
            var e=window.event||arguments[0];
            switch(e.keyCode){
                case 37:
                    e.preventDefault();
                    boxman.direction="left";
                    boxman.manMove(boxman.leftIndex);
                    boxman.leftIndex++;
                    boxman.leftIndex=boxman.leftIndex>1?0:boxman.leftIndex;
//                    boxman.win();
//                    if(boxman.isWin){
//                        setTimeOut
//                        console.log("you win");
//                        boxman.nextLevel();
//                    }
                    boxman.isWin();
                    break;
                case 39:
                    e.preventDefault();
                    boxman.direction="right";
                    boxman.manMove(boxman.rightIndex);
                    boxman.rightIndex++;
                    boxman.rightIndex=boxman.rightIndex>3?2:boxman.rightIndex;
//                    boxman.win();
                    boxman.isWin();
                    break;
                case 38:
                    e.preventDefault();
                    boxman.direction="up";
                    boxman.manMove(boxman.upIndex);
                    boxman.upIndex++;
                    boxman.upIndex=boxman.upIndex>9?7:boxman.upIndex;
//                    boxman.win();
                    boxman.isWin();
                    break;
                case 40:
                    e.preventDefault();
                    boxman.direction="down";
                    boxman.manMove(boxman.downIndex);
                    boxman.downIndex++;
                    boxman.downIndex=boxman.downIndex>6?4:boxman.downIndex;
//                    boxman.win();
                    boxman.isWin();
                    break;
            }
        }
    }

</script>
</body>
</html>